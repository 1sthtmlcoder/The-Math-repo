"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[6691],{6691:(e,r,o)=>{o.d(r,{O:()=>w});var a=o(814),s=o.n(a),n=o(24923),u=o.n(n),t=(o(6886),o(52322)),i=o(31168),l=o(9888),d=o(93156),c=o(14001),p=o(27256),b=o(2784),g=o(87163),m=o(6515);var v=o(61872),S=(o(31235),o(32062)),h=o(3968),P=o(28663);var _=o(49687),C=o(98660),X=(o(9e4),o(26464),o(18339),o(55415)),y=o(20396);var E=o(765),I=o(99341),x=o(29510),T=o(35365);const f=["onError","onSuccess","onCancel","onClose"],M=["productPrograms","xgpuEntitlement"],w=e=>{let{onError:r,onSuccess:o,onCancel:a,onClose:n}=e,w=u()(e,f);const[,k]=(e=>{const[,r]=(0,X.M)(e),o=(0,y.o)(),a=(0,b.useMemo)((()=>(0,l.lceTransform)(r,(e=>{var a;return r.type!==l.LCEType.Error&&e&&o?null===(a=e.offerings[o])||void 0===a?void 0:a.programs:[]}))),[r,o]);return(0,l.useLce)(a)})(w.productId),[,A]=(0,m.aK)(g.Os),{telemetryProvider:B}=(0,h.S)(),N=(0,_.nj)(v.y.EnableContextualStoreVNext),L=(0,b.useMemo)((()=>k.type===l.LCEType.Error?(0,l.lceContent)([]):k),[k]),O=(0,b.useMemo)((()=>(0,l.lceTransform)((0,l.lceMerge)(L,A),(e=>{let[r,o]=e;return s()({productPrograms:null!==r&&void 0!==r?r:[],xgpuEntitlement:null!==o&&void 0!==o?o:void 0},w)}))),[L,w,A]),U=e=>{let{productPrograms:i,xgpuEntitlement:l}=e,c=u()(e,M);const g=((e,r)=>{const{deviceInformation:{isFireOS:o,isMobile:a,isTizen:s,isSupportedTVBrowser:n}}=(0,h.S)();return(0,b.useMemo)((()=>{let u=a?P.Xb.XboxComMobile:P.Xb.XboxCom;const t=null===e||void 0===e?void 0:e.includes(P.fj.BYOG),i=null===e||void 0===e?void 0:e.includes(P.fj.GPULTIMATE),l=t&&!i,d=!0===(0,S.ab)();return l?(a?u=P.Xb.XboxComByogMobile:n?s&&d?u=P.Xb.SamsungThirdPartyByog:s?u=P.Xb.SamsungByog:o&&(u=P.Xb.AmazonByog):u=P.Xb.XboxComByog,u):(n&&(s?u=d?null!==r&&void 0!==r&&r.HasPurchased?P.Xb.SamsungThirdPartyXgpuSubscriber:null!==r&&void 0!==r&&r.IsTrial?P.Xb.SamsungThirdPartyXgpuTrialSubscriber:P.Xb.SamsungThirdPartyXgpuNonSubscriber:null!==r&&void 0!==r&&r.HasPurchased?P.Xb.SamsungXgpuSubscriber:null!==r&&void 0!==r&&r.IsTrial?P.Xb.SamsungXgpuTrialSubscriber:P.Xb.SamsungXgpuNonSubscriber:o&&(u=null!==r&&void 0!==r&&r.HasPurchased?P.Xb.AmazonXgpuSubscriber:null!==r&&void 0!==r&&r.IsTrial?P.Xb.AmazonXgpuTrialSubscriber:P.Xb.AmazonXgpuNonSubscriber)),u)}),[o,a,n,s,e,null===r||void 0===r?void 0:r.HasPurchased,null===r||void 0===r?void 0:r.IsTrial])})(i,l),m=(0,E.R)(),{sharedTelemetryProps:v,onPageChange:_}=(0,T.w)({productId:c.productId,source:g,type:c.type,scenario:c.xStoreScenario}),{onMessage:X,onResult:y,onLoaded:f}=(0,x.R)({sharedTelemetryProps:v,onPageChange:_,onSuccess:o,onCancel:a,onClose:n,onError:r}),w=(0,b.useMemo)((()=>({callerApplicationId:v.source,campaignId:"CloudGaming.Web"})),[v]);return(0,b.useEffect)((()=>{f()}),[f]),(0,C.cu)((0,b.useCallback)((()=>(B.trackEvent(s()(s()({name:I.c.PurchaseCancelled},v),{},{status:d.sCM.Canceled})),null===a||void 0===a||a(),!0)),[v])),(0,t.jsx)(p.m3,{partnerId:d.IGD,children:(0,t.jsx)(d.uL1,s()({skipPurchaseConfirmation:!1,version:d.zBs.v2,onResult:y,onMessage:X,tracking:w,clientType:m,activateStoreExperiments:N},c))})},z=()=>(0,t.jsx)(c.h2,{});return(0,t.jsx)(i.LceRenderer,{data:O,renderContent:e=>{let{data:r}=e;return(0,t.jsx)(U,s()({productPrograms:r.productPrograms,xgpuEntitlement:r.xgpuEntitlement},w))},renderError:e=>{let{error:o}=e;return null===r||void 0===r||r(o),null},renderFetching:z,renderDefault:z})}},29510:(e,r,o)=>{o.d(r,{R:()=>c});var a=o(814),s=o.n(a),n=(o(71372),o(6710),o(46209)),u=o(93156),t=o(2784),i=o(3968),l=o(99341);const d="useContextualStoreCallbacks",c=e=>{let{sharedTelemetryProps:r,onPageChange:o,onLoad:a,onSuccess:c,onError:p,onCancel:b,onClose:g,handleOpenUrl:m}=e;const{telemetryProvider:v}=(0,i.S)(),S=(0,t.useMemo)((()=>new n.Logger(d)),[]),h=(0,t.useRef)(!1),P=(0,t.useRef)(!1);return(0,t.useMemo)((()=>{r.productId||null===p||void 0===p||p(new Error("Missing productId"),s()(s()({},r),{},{status:u.sCM.PurchaseError}));return{onLoaded:()=>{!0!==P.current&&(v.trackEvent(s()({name:l.c.PurchaseStarted},r)),null===a||void 0===a||a(),P.current=!0,S.info(`Purchase loaded for ${r.storeId}`))},onResult:e=>{if(S.info(d,"Response from contextual store",e),!0===h.current)return S.warn(d,`Duplicate purchase result detected, returning: ${JSON.stringify(e)}`),void(null===g||void 0===g||g());const{status:o,productId:a,skuId:n,availabilityId:t,orderId:i,error:m,xboxCardUsedForPurchase:P}=e,_=null!==a&&void 0!==a?a:"unknown";switch(o){case u.sCM.Purchased:v.trackEvent(s()(s()({name:l.c.PurchaseCompleted},r),{},{productId:_,skuId:n,availabilityId:t,status:o,orderId:null!==i&&void 0!==i?i:"",xboxCardUsedForPurchase:P})),null===c||void 0===c||c(e),null===g||void 0===g||g();break;case u.sCM.PurchaseError:case u.sCM.ServiceError:throw v.trackEvent(s()(s()({name:l.c.PurchaseError},r),{},{productId:_,skuId:n,availabilityId:t,status:o,error:JSON.stringify(m)})),null===p||void 0===p||p(null!==m&&void 0!==m?m:new Error("Contextual store purchase error"),e),null===g||void 0===g||g(),m;case u.sCM.Canceled:v.trackEvent(s()(s()({name:l.c.PurchaseCancelled},r),{},{productId:_,skuId:n,availabilityId:t,status:o})),null===b||void 0===b||b(),null===g||void 0===g||g();break;case u.sCM.AlreadyPurchased:v.trackEvent(s()(s()({name:l.c.PurchaseCompleted},r),{},{productId:_,skuId:n,availabilityId:t,status:o,orderId:null!==i&&void 0!==i?i:""})),null===p||void 0===p||p(null!==m&&void 0!==m?m:new Error(`Product: ${a}/${n}/${t} already purchased`),e),null===g||void 0===g||g();break;default:v.trackEvent(s()(s()({name:l.c.PurchaseError},r),{},{status:o,productId:_,skuId:n,availabilityId:t,error:JSON.stringify(m)})),null===p||void 0===p||p(null!==m&&void 0!==m?m:new Error("Unknown purchase status"),e),null===g||void 0===g||g()}h.current=!0},onMessage:e=>{switch(S.info(e.data),e.type){case u.EqJ.PageChange:o(e.data);break;case u.EqJ.OpenUrl:null===m||void 0===m||m(e.data);break;default:S.error(`Unknown message type encountered: ${e.type}`)}}}}),[m,S,b,g,p,a,o,c,r,v])}},35365:(e,r,o)=>{o.d(r,{w:()=>t});var a=o(814),s=o.n(a),n=(o(6886),o(2784)),u=o(765);const t=e=>{const[r,o]=(0,n.useState)(),a=(0,u.R)();return{sharedTelemetryProps:(0,n.useMemo)((()=>s()(s()({},e),{},{page:r,sourceClientName:a})),[r,e,a]),onPageChange:o}}},28663:(e,r,o)=>{var a,s,n,u,t,i,l;o.d(r,{OS:()=>u,QM:()=>s,Xb:()=>i,fj:()=>l,ui:()=>t,z4:()=>n}),function(e){e.Purchased="Purchased",e.Error="Error",e.Canceled="Canceled"}(a||(a={})),function(e){e.Succeeded="Succeeded",e.AlreadyPurchased="AlreadyPurchased",e.NotPurchased="NotPurchased",e.NetworkError="NetworkError",e.ServerError="ServerError"}(s||(s={})),function(e){e.OneCoreRequestPurchase="OneCoreRequestPurchase",e.ShowDetails="ShowDetails",e.ShowDetailsForStoreId="ShowDetailsForStoreId",e.XboxPurchaseApi="XboxPurchaseApi",e.ShowMarketplace="ShowMarketplace",e.XStoreShowPurchaseUi="XStoreShowPurchaseUI",e.XStoreShowProductPageUi="XStoreShowProductPageUI",e.XStoreShowAssociatedProductsUi="XStoreShowAssociatedProductsUI"}(n||(n={})),function(e){e.InStream="InStream",e.InApp="InApp",e.GamePass="GamePass"}(u||(u={})),function(e){e.Test="XETest",e.Native="XENative",e.Web="XEWeb"}(t||(t={})),function(e){e.XboxCom="XboxCom",e.XboxComMobile="XboxComMobile",e.XboxComByog="XboxComByog",e.XboxComByogMobile="XboxComByogMobile",e.AmazonXgpuSubscriber="gamepassamazontvsub_app_xbo_01_3.26.24",e.AmazonXgpuTrialSubscriber="gamepassamazontvtio_app_xbo_01_3.26.24",e.AmazonXgpuNonSubscriber="gamepassamazontvnosub_app_xbo_01_3.26.24",e.AmazonByog="gamepassamazontvbyog_app_xbo_01_9.19.24",e.SamsungXgpuSubscriber="gamepasssamsungtvsub_app_xbo_01_5.1.1",e.SamsungXgpuTrialSubscriber="gamepasssamsungtvtio_app_xbo_01_5.1.1",e.SamsungXgpuNonSubscriber="gamepasssamsungtvnosub_app_xbo_01_5.1.1",e.SamsungByog="gamepasssamsungtvbyog_app_xbo_01_9.19.24",e.SamsungThirdPartyXgpuSubscriber="gamepasssamsungtv3psub_app_xbo_01_5.1.1",e.SamsungThirdPartyXgpuTrialSubscriber="gamepasssamsungtv3ptio_app_xbo_01_5.1.1",e.SamsungThirdPartyXgpuNonSubscriber="gamepasssamsungtv3pnosub_app_xbo_01_5.1.1",e.SamsungThirdPartyByog="gamepasssamsungtv3pbyog_app_xbo_01_9.19.24"}(i||(i={})),function(e){e.BYOG="BYOG",e.GPULTIMATE="GPULTIMATE"}(l||(l={}))},765:(e,r,o)=>{o.d(r,{R:()=>u});var a=o(36749),s=o(41924),n=o(28663);const u=()=>{const e=(0,a.Z)(),r=(0,s.v)(window.location.hostname);return e||r?n.ui.Test:n.ui.Web}}}]);
//# sourceMappingURL=6691.07416d35.chunk.js.map